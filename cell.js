const path = require('path');
const Max = require('max-api');
const fs = require('fs');
const math= require('mathjs')
function parseAndResize(pattern,x,y){

    //const values = Object.keys(pattern).map(l => pattern[l]);
    const storage={};
    for (const [key, value] of Object.entries(pattern)) {
        const trimmed = value.trim()
        console.log(`${key}: ${trimmed}`);
        const newThangs= trimmed.replace(/\*/g, '255 ').replace(/\./g,'0 ')
        const lastLine = 1;
        const symbolsPerLine = trimmed.split('\n')[0].length 
        const numberOfLines = newThangs.match(/\n/g).length + lastLine;
        //create new data structure from strings
        const rows = newThangs.split('\n').map(r => r.trim())
        const arrayCollection = rows.map(l =>  l.split(' ').map(n => parseInt(n)))
        const matrix = math.matrix(arrayCollection);
        const resizedToMatrixInMax = matrix.resize([x, y])
        const oneDimensionalMatrix = math.flatten(resizedToMatrixInMax) //flattened and converted to an array
        const arrWithoutCommas = Object.values(oneDimensionalMatrix)[0].join(' ')
        storage[key]= arrWithoutCommas;
      
      }
     
    return storage;
}
const patterns = {

'101':
 `
....**......**....
...*.*......*.*...
...*..........*...
**.*..........*.**
**.*.*..**..*.*.**
...*.*.*..*.*.*...
...*.*.*..*.*.*...
**.*.*..**..*.*.**
**.*..........*.**
...*..........*...
...*.*......*.*...
....**......**....

`
 ,'A for All':
 `
....**....
...*..*...
...****...
.*.*..*.*.
*........*
*........*
.*.*..*.*.
...****...
...*..*...
....**....

`
 ,'acorn':
 `
.*.....
...*...
**..***


`
 ,'aircraft carrier':
 `
**..
*..*
..**

`
 ,'airforce':
 `
.......*......
......*.*.....
.......*......
..............
.....*****....
....*.....*.**
...*.**...*.**
...*.*..*.*...
**.*...**.*...
**.*.....*....
....*****.....
..............
......*.......
.....*.*......
......*.......

`
 ,'ants':
 `
**........**...**...**...**...**...**..
..**.**.....**...**...**...**...**...**
..**...**...**...**...**...**...**...**
**.....**.**...**...**...**...**...**..
.....**................................

`
 ,'aVerage':
 `
.....*.....
....*.*....
.....*.....
...........
...*****...
..*..*..*..
.*.**.**.*.
.*.*...*.*.
**.*...*.**
*..*.*.*..*
..*.....*..
...*****...
.....*.....

`
 ,'b-heptomino':
 `
.*..
***.
*.**

`
 ,'b-heptomino shuttle, p46 shuttle, twin bees shuttle':
 `
.................*...........
**...............**........**
**................**.......**
.................**..........
.............................
.............................
.............................
.................**..........
..................**.........
.................**..........
.................*...........


`
 ,'bakery - 4 loaves:':
 `
....**....
...*..*...
...*.*....
.**.*...*.
*..*...*.*
*.*...*..*
.*...*.**.
....*.*...
...*..*...
....**....


`
 ,'barberpole - any length extension of this p2 oscillator:':
 `
.....**
......*
...*.*.
.......
.*.*...
*......
**.....

`
 ,'barge':
 `
.*..
*.*.
.*.*
..*.

`
 ,'beacon':
 `
**..
*...
...*
..**

`
 ,'beehive':
 `
.**.
*..*
.**.

`
 ,'beehive and dock, beehive on big table':
 `
**..**
*....*
.****.
......
...**.
..*..*
...**.

`
 ,'beehive with tail':
 `
.*...
*.*..
*.*..
.*...
..***
....*

`
 ,'bi-loaf, half bakery, loaf on loaf':
 `
.*.....
*.*....
*..*...
.**.*..
...*.*.
...*..*
....**.

`
 ,'biblock':
 `
**.**
**.**

`
 ,'big S, S-spiral':
 `
....**.
...*..*
...*.**
**.*...
*..*...
.**....


`
 ,'bipole, short barberpole - this length of the barberpole:':
 `
**...
*.*..
.....
..*.*
...**

`
 ,'blinker':
 `
...
***
...

`
 ,'blinker ship':
 `
...........*..*...............
..........*...................
..........*...*...............
..**......****................
.****.........................
**.**.........................
.**.....**.***................
.......*.....**.......*....***
......**.......*......*....*.*
.......*.....**.......*....***
.**.....**.***................
**.**.........................
.****.........................
..**......****................
..........*...*...............
..........*...................
...........*..*...............

`
 ,'block':
 `
**
**

`
 ,'block and dock, block on big table':
 `
**..**
*....*
.****.
......
...**.
...**.

`
 ,'block on table':
 `
**...
.*...
.*.**
**.**

`
 ,'blocker':
 `
.......*.*
......*...
**..*....*
**.*..*.**
.....**...

`
 ,'boat':
 `
.*.
*.*
.**


`
 ,'boat on boat, boat-tie, bow tie, bi-boat':
 `
.*....
*.*...
.**...
...**.
...*.*
....*.

`
 ,'bookends':
 `
**...**
*.*.*.*
..*.*..
.**.**.

`
 ,'boss':
 `
.....*.....
....*.*....
....*.*....
...**.**...
..*.....*..
.*.*.*.*.*.
.*.*...*.*.
**.*...*.**
*..*.*.*..*
..*.....*..
...**.**...
....*.*....
....*.*....
.....*.....

`
 ,'brain':
 `
.**........
*..*.....**
***...***..
*..*.****..
.***...*...
.*..***....
...*....**.
...*****.*.
...........
...*****.*.
...*....**.
.*..***....
.***...*...
*..*.****..
***...***..
*..*.....**
.**........


`
 ,'bunnies':
 `
*.....*.
..*...*.
..*..*.*
.*.*....

`
 ,'burloaferimeter':
 `
.....*.....
....*.*....
...*.*.*...
...*.*.*...
**.*.*.*.**
**.*....*.*
....****...
...........
....**.....
....**.....


`
 ,'caterer':
 `
.....*..
****...*
...*...*
.......*
....*...
.....**.


`
 ,'centinal':
 `
**................................................**
.*................................................*.
.*.*.....................**.....................*.*.
..**........*............**............**.......**..
...........**..........................*.*..........
..........**.............................*..........
...........**..**......................***..........
....................................................
....................................................
....................................................
...........**..**......................***..........
..........**.............................*..........
...........**..........................*.*..........
..**........*............**............**.......**..
.*.*.....................**.....................*.*.
.*................................................*.
**................................................**

`
 ,'chemist':
 `
.......*.......
.......***.....
..........*....
.....***..*..**
....*.*.*.*.*.*
....*...*.*.*..
.**.*.*.*.*.**.
..*.*.*...*....
*.*.*.*.*.*....
**..*..***.....
....*..........
.....***.......
.......*.......


`
 ,'cis-mirrored R-bee':
 `
.**.
*..*
***.
....
***.
*..*
.**.

`
 ,'cis-boat with tail, down boat with tail':
 `
....*
..***
.*...
*.*..
.**..

`
 ,'clock':
 `
..*.
**..
..**
.*..

`
 ,"cloverleaf, Achim's p4":
`
...*.*...
.***.***.
*...*...*
*.*.*.*.*
.*******.
.........
.*******.
*.*.*.*.*
*...*...*
.***.***.
...*.*...

`
,'confused eaters':
`
*..........
***........
...*.......
..*........
..*..*.....
.....*.....
...*.*.....
...**..**..
.......*.*.
.........*.
.........**

`
,'cross':
`
..****..
..*..*..
***..***
*......*
*......*
***..***
..*..*..
..****..

`
,'dart':
`
........*.
.......*.*
......**..
.........*
.....*...*
..*..*....
.*.*..****
*..*......
.*.*..****
..*..*....
.....*...*
.........*
......**..
.......*.*
........*.

`
,'dead spark coil, JC':
`
**...**
*.*.*.*
..*.*..
*.*.*.*
**...**

`
,'diamond ring':
`
......*......
.....*.*.....
....*.*.*....
....*...*....
..**..*..**..
.*....*....*.
*.*.**.**.*.*
.*....*....*.
..**..*..**..
....*...*....
....*.*.*....
.....*.*.....
......*......


`
,'double wing, moose antlers':
`
**.....**
*.......*
.***.***.
...*.*...
....*....


`
,'eater, fishhook - this eater, which eats gliders and fish:':
`
**..
*.*.
..*.
..**

`
, 'elevener, intentionless':

`
....**
.....*
..***.
..*...
*.*...
**....



`
,'big beacon':
`
***...
***...
***...
...***
...***
...***

`
,'fleet - 4 ships:':
`
....**....
....*.*...
.....**...
.......**.
**.....*.*
*.*.....**
.**.......
...**.....
...*.*....
....**....


`
,'fountain':
`
.........*.........
...................
...**.*.....*.**...
...*.....*.....*...
....**.**.**.**....
...................
......**...**......
**...............**
*..*...*.*.*...*..*
.***.*********.***.
....*....*....*....
...**.........**...
...*...........*...
....*.........*....
...**.........**...

`
,'fourteener, 14-ner':
`
....**.
**..*.*
*.....*
.*****.
...*...

`
,'fumarole':
`
...**...
.*....*.
.*....*.
.*....*.
..*..*..
*.*..*.*
**....**


`
,'glider':
`
..*
*.*
.**


`
,'Gosper gun, original glider gun':
`
.........................*..........
......................****....*.....
.............*.......****.....*.....
............*.*......*..*.........**
...........*...**....****.........**
**.........*...**.....****..........
**.........*...**........*..........
............*.*.....................
.............*......................

`
,'gourmet':
`
..........**........
..........*.........
..*.**.**.*.....**..
..**.*.*.*......*...
........*........*..
................**..
....................
...........*....**..
*.........*.*..*.*..
***......**.**..*...
...*.............***
..*.*..............*
..**................
....................
..**................
..*........*........
...*......*.*.*.**..
..**.....*.**.**.*..
.........*..........
........**..........


`
,'gray counter':
`
....*....
...*.*...
....*....
.........
..*****..
.*.....*.
*.*...*.*
.*.....*.
..*****..
.........
....*....
...*.*...
....*....

`
,'great on-off':
`
..**....
.*..*...
.*.**...
**.*.**.
....**.*
.......*
....***.
....*...

`
,'hat':
`
..*..
.*.*.
.*.*.
**.**

`
,'heavyweight emulator':
`
.......**.......
..**.*....*.**..
..*..........*..
...**......**...
***..******..***
*..*........*..*
.**..........**.

`
,'heavyweight spaceship, HWSS, big fish':
`
.******
*.....*
......*
*....*.
..**...

`
,'heavyweight volcano':
`
.........*..........................
........*.*.........................
......***.*.........................
.....*....**.*......................
.....*.**...**......**..............
....**.*.**.........*.*.............
.........*.*****......*..*.**.......
..*.**.**.*.....*....**.*.**.*......
.....**.....****........*....*......
*...*.*..*...*.*....**.*.****.**....
*...*.*..**.*.**.**....*.*....*.*...
.....**...***.**.*.***.*..***...*...
..*.**.**.**.............*.*..*.*.**
...........*......*.*.*.*..**.*.*.*.
....**.*.*.**......**.*.*.*...*.*.*.
.....*.**.*..*.......*.**..****.**..
.....*....*.*........*...**.........
....**....**........**...*..*.......
...........................**.......


`
,'Herschel - 20th generation of a b-heptomino:':
`
***.
..*.
.***

`
,'Hertz oscillator':
`
...**.*....
...*.**....
...........
....***....
...*.*.*.**
...*...*.**
**.*...*...
**.*...*...
....***....
...........
....**.*...
....*.**...

`
,'HighLife':
`
***.
...*
...*
...*

`
,'honeyfarm - 4 beehives:':
`
......*......
.....*.*.....
.....*.*.....
......*......
.............
.**.......**.
*..*.....*..*
.**.......**.
.............
......*......
.....*.*.....
.....*.*.....
......*......

`
,'hustler':
`
.....**....
.....**....
...........
...****....
*.*....*...
**.*...*...
...*...*.**
...*....*.*
....****...
...........
....**.....
....**.....

`
,'induction coil - any pattern used to stabilize a border.  Example:':
`
.**....
.*..*..
..***..
.......
*******
*..*..*


`
,'integral sign':
`
...**
..*.*
..*..
*.*..
**...

`
,'jam':
`
....**.
...*..*
.*..*.*
*....*.
*......
..***..

`
,'keys':
`
.*........*.
*.***..***.*
.*..*..*..*.
....*..*....

`
,'kickback reaction':
`
....*.*
***..**
..*..*.
.*.....

`
,"Kok's galaxy":
 `
******.**
******.**
.......**
**.....**
**.....**
**.....**
**.......
**.******
**.******

`
 ,'light bulb':
 `
.**.*..
.*.**..
.......
..***..
.*...*.
.*...*.
..*.*..
*.*.*.*
**...**

`
 ,'lightspeed wire':
 `
...*..*..*..*..*..*..*..*..*..*..*..*..*..*..*..*..*..*..*..*...
...**********************************************************...
................................................................
.**************************************************************.
*.................................*.......*..........*.........*
****.**.*..*****..***************....*****....*******...********
....*...**.....**.......*.......*........*............*.........
******..*..*****..*****....******....*****....*******...********
*......................*.........*........*..........*.........*
.**************************************************************.
................................................................
...**********************************************************...
...*..*..*..*..*..*..*..*..*..*..*..*..*..*..*..*..*..*..*..*...

`
 ,'lightweight emulator':
 `
..**.*..*.**..
..*........*..
...**....**...
***..****..***
*..*......*..*
.**........**.

`
 ,'lightweight spaceship, LWSS, small fish':
 `
.****
*...*
....*
*..*.


`
 ,'loaf':
 `
.*..
*.*.
*..*
.**.

`
 ,'long barge':
 `
.*...
*.*..
.*.*.
..*.*
...*.

`
 ,'long boat':
 `
.*..
*.*.
.*.*
..**

`
 ,'long ship':
 `
**..
*.*.
.*.*
..**

`
 ,'loop':
 `
*...
***.
...*
**.*
*.*.

`
 ,'lumps of muck, LoM, blockade - 4 blocks:':
 `
**.....................
**.....................
.......................
.......................
.**.................**.
.**.................**.
.......................
.......................
.....................**
.....................**

`
 ,'mango, dove, cigar':
 `
.**..
*..*.
.*..*
..**.

`
 ,'mazing':
 `
...**..
.*.*...
*.....*
.*...**
.......
...*.*.
....*..


`
 ,'middleweight emulator':
 `
.......*.......
..**.*...*.**..
..*.........*..
...**.....**...
***..*****..***
*..*.......*..*
.**.........**.

`
 ,'middleweight spaceship, MWSS, medium fish':
 `
.*****
*....*
.....*
*...*.
..*...

`
 ,'middleweight volcano':
 `
...*******...
.***.***.***.
*....***....*
.****.*.***.*
...........*.
*.**.*.*.*...
**.*.*.*.**..
....*..*.*...
.....**..*...
.........**..

`
 ,'MIT oscillator, cuphook':
 `
....**...
...*.*...
...*.....
**.*.....
**.*..*..
....**.*.
.......*.
.......**

`
 ,'mold':
 `
.**...
*..*..
*.*..*
.*....
..**.*
....*.

`
 ,'monogram, JHC':
 `
**...**
.*.*.*.
.**.**.
.*.*.*.
**...**

`
 ,'negentropy':
 `
......**....
......**....
............
....****..**
**.*..*.*..*
.*.*...**.*.
*..*....*.**
**..****....
............
....**......
....**......

`
 ,'octagon II':
 `
...**...
..*..*..
.*....*.
*......*
*......*
.*....*.
..*..*..
...**...

`
 ,'Orion':
 `
...**.........
...*.*........
...*..........
**.*..........
*....*........
*.**......***.
.....***....**
......***.*.*.
.............*
......*.*.....
.....**.*.....
......*.......
....**.*......
.......*......
.....**.......


`
 ,'paperclip, drain trap':
 `
..**.
.*..*
.*.**
**.*.
*..*.
.**..

`
 ,'pedestle':
 `
.....*.....
....*.*....
.*..**.....
.***.......
.....***...
...**...*..
..*....*..*
.*.*.*.*.**
.*.*...*.*.
**.*.*.*.*.
*..*....*..
..*...**...
...***.....
.......***.
.....**..*.
....*.*....
.....*.....

`
 ,'penny lane':
 `
...**.....**...
...*.......*...
**.*.......*.**
**.*.*****.*.**
....*..*..*....
.....*****.....
...............
.......*.......
......*.*......
.......*.......

`
 ,'pentadecathlon, PD':
 `
..*....*..
**.****.**
..*....*..

`
 ,'yet lives forever.  Example:':
 `
...*....
...*.*..
.*......
......**
**......
......*.
..*.*...
....*...

`
 ,'pi heptomino':
 `
***
*.*
*.*

`
 ,'pond':
 `
.**.
*..*
*..*
.**.

`
 ,'pond on pond, bi-pond':
 `
.**....
*..*...
*..*...
.**.**.
...*..*
...*..*
....**.


`
 ,'pressure cooker':
 `
.....*.....
....*.*....
....*.*....
...**.**...
*.*.....*.*
**.*.*.*.**
...*...*...
...*...*...
....***....
...........
...*.**....
...**.*....

`
 ,'pseudo-barberpole':
 `
..........**
...........*
.........*..
.......*.*..
............
.....*.*....
............
...*.*......
............
..**........
*...........
**..........

`
 ,'pulsar, CP-pulsar, pulsar CP 48-56-72':
 `
..***...***..
.............
*....*.*....*
*....*.*....*
*....*.*....*
..***...***..
.............
..***...***..
*....*.*....*
*....*.*....*
*....*.*....*
.............
..***...***..

`
 ,'pushalong - a tagalong on the front end of a spaceship.  Example:':
 `
..***.*.....
.****.*.....
**..........
.*.*........
..****.*....
...***......
............
............
......*****.
......*....*
......*.....
.......*...*
.........*..

`
 ,'pyrotechneczum':
 `
.......*........
.....*****......
....*.....*.....
.*..*..***.*....
*.*.*.*....*..*.
.*..*....*.*.*.*
....*.***..*..*.
.....*.....*....
......*****.....
........*.......

`
 ,'quad, barberpole intersection':
 `
**..**
*..*.*
.*....
....*.
*.*..*
**..**

`
 ,'barberpole:':
 `
**.....
*.*....
.......
..*.*..
.......
....*.*
.....**

`
 ,'queen bee':
 `
*....
****.
.****
.*..*
.****
****.
*....

`
 ,'queen bee shuttle, p30 shuttle':
 `
..........*...........
..........****........
**.........****.....**
**.........*..*.....**
...........****.......
..........****........
..........*...........

`
 ,'r-pentomino':
 `
.**
**.
.*.

`
 ,'R2D2':
 `
...**...
...**...
........
.******.
*......*
***...**
........
********
*......*
...**...
...**...

`
 ,'rabbits':
 `
*...***
***..*.
.*.....


`
 ,'rephaser':
 `
...**...
...**...
........
........
.**..**.
*.*..*.*
..*..*..


`
 ,'revolver':
 `
**....**
.*....*.
.*.**.*.
..*..*..
...*....
.....*..
.**.....
.....**.
..*.....
....*...
..*..*..
.*.**.*.
.*....*.
**....**

`
 ,'roteightor':
 `
.*............
.***........**
....*.......*.
...**.....*.*.
..........**..
..............
.....***......
.....*..*.....
.....*........
..**..*...*...
.*.*......*...
.*.......*....
**........***.
............*.


`
 ,'Schick engine':
 `
.....****
....*...*
........*
**..*..*.
***......
**..*..*.
........*
....*...*
.....****

`
 ,'scorpion':
 `
...*...
.***...
*...**.
*.*.*.*
.**.*.*
.....*.

`
 ,'scrubber':
 `
....*......
..***......
.*.........
.*..***....
**.*...*...
...*...*...
...*...*.**
....***..*.
.........*.
......***..
......*....


`
 ,'shillelagh':
 `
**...
*..**
.**.*

`
 ,'ship':
 `
**.
*.*
.**

`
 ,'ship on boat, boat-ship-tie':
 `
**....
*.*...
.**...
...**.
...*.*
....*.

`
 ,'shiptie, ship on ship, bi-ship, half fleet':
 `
**....
*.*...
.**...
...**.
...*.*
....**


`
 ,'siesta':
 `
...........**...
...**.....*.*...
...*.*....*.....
.....*...**.*...
...*.**.....***.
.***.....*.*...*
*...*.*.....***.
.***.....**.*...
...*.**...*.....
.....*....*.*...
...*.*.....**...
...**...........

`
 ,'sinking ship':
 `
...**
....*
...*.
*.*..
**...

`
 ,'skewed quad':
 `
.**....
.*...**
..*.*.*
.......
*.*.*..
**...*.
....**.

`
 ,'smiley':
 `
**.*.**
...*...
*.....*
.*****.
.......
.......
***.***

`
 ,'snacker':
 `
**................**
.*................*.
.*.*............*.*.
..**............**..
.......*....*.......
.....**.****.**.....
.......*....*.......
..**............**..
.*.*............*.*.
.*................*.
**................**

`
 ,'snake':
 `
*.**
**.*

`
 ,'snake pit':
 `
*.**.**
**.*.*.
......*
***.***
*......
.*.*.**
**.**.*

`
 ,'sombreros':
 `
...**........**...
...*.*......*.*...
.....*......*.....
...*.**....**.*...
.***..........***.
*...*.*....*.*...*
.***..........***.
...*.**....**.*...
.....*......*.....
...*.*......*.*...
...**........**...

`
 ,'spark coil, grapser':
 `
**....**
*.*..*.*
..*..*..
*.*..*.*
**....**

`
 ,'Sparky':
 `
..........*....................
..........*...............**...
......**.*.***..........**...*.
*.**.**.**..*.*...**.****......
*...**..*.**..***..*.**..**...*
*.**....***.*.***......**..*...
........**.*...............*..*
*.**....***.*.***......**..*...
*...**..*.**..***..*.**..**...*
*.**.**.**..*.*...**.****......
......**.*.***..........**...*.
..........*...............**...
..........*....................


`
 ,'spider':
 `
.........*.......*.........
...**.*.*.**...**.*.*.**...
***.*.***.........***.*.***
*...*.*.....*.*.....*.*...*
....**......*.*......**....
.**.........*.*.........**.
.**.**...............**.**.
.....*...............*.....

`
 ,'spiral':
 `
**....*
.*..***
.*.*...
..*.*..
...*.*.
***..*.
*....**

`
 ,'star':
 `
.....*.....
....***....
..***.***..
..*.....*..
.**.....**.
**.......**
.**.....**.
..*.....*..
..***.***..
....***....
.....*.....


`
 ,'switch engine:':
 `
.*.*..
*.....
.*..*.
...***


`
 ,'table on table, ][, pair of tables':
 `
*..*
****
....
****
*..*


`
 ,'technician finished product':
 `
.....*.....
....*.*....
....**.....
..**.......
.*...***...
*..**...*.*
.**....*.**
...*.*.*...
...*...*...
....***....
......*.*..
.......**..


`
 ,'test tube baby':
 `
**....**
*.*..*.*
..*..*..
..*..*..
...**...

`
 ,'toad':
 `
.***
***.

`
 ,'toadsucker - a hassler that sucks a toad.  Example:':
 `
...*....*..
.**.****.**
...*....*..
...........
...........
...........
...........
...........
.....***...
....***....
...........
...........
...........
...........
...........
..*....*...
**.****.**.
..*....*...

`
 ,'toaster, lightweight volcano':
 `
...**..**...
.***.**.***.
*..........*
.****..****.
....*..*....
.**......**.
.*..*..*..*.
..***..***..
............
****.**.****
*..**..**..*

`
 ,'traffic circle':
 `
.....................**....**...................
.....................*.*..*.*...................
.......................*..*.....................
......................*....*....................
......................*....*....................
......................*....*....................
........................**.....**...............
...............................***..............
...............................**.*.............
.................................*.*............
.........................***....*..*............
.................................**.............
.........**............*.....*..................
........*..*...........*.....*..................
......*..*.*...........*.....*..................
..........*.....................................
......*.**...............***....................
.......*.....*..................................
.............*..................................
**...........*..................................
*..***..........................................
.**......***...***............................**
......*...................................***..*
......*......*...............................**.
.**..........*........*..................*......
*..***.......*......**.**............*...*......
**....................*............**.**.....**.
.....................................*....***..*
..............................................**
................................................
......................................*.*.......
....................***..................*......
.....................................*..*.......
..................*.....*...........*.*.*.......
..................*.....*...........*..*........
..................*.....*............**.........
.............**.................................
............*..*....***.........................
............*.*.*...............................
.............*.***..............................
...............***..............................
......................**........................
....................*....*......................
....................*....*......................
....................*....*......................
.....................*..*.......................
...................*.*..*.*.....................
...................**....**.....................


`
 ,'traffic lights - 4 blinkers:':
 `
....*....
....*....
....*....
.........
***...***
.........
....*....
....*....
....*....

`
 ,'trans-boat with tail, up boat with tail':
 `
...**
..*.*
.*.*.
.*...
**...

`

 ,'tripole, short barberpole - this length of the barberpole:':
 `
**....
*.*...
......
..*.*.
.....*
....**

`
 ,'tub':
 `
.*.
*.*
.*.

`
 ,'tub with tail':
 `
.*...
*.*..
.*.*.
...*.
...**

`
 ,'tubber':
 `
....*.*......
....**.*.....
.......***...
....**....*..
**.*..**..*..
.*.*....*.**.
*...*...*...*
.**.*....*.*.
..*..**..*.**
..*....**....
...***.......
.....*.**....
......*.*....

`
 ,'tumbler':
 `
.**.**.
.**.**.
..*.*..
*.*.*.*
*.*.*.*
**...**

`
 ,'turtle':
 `
.***.......*..
.**..*.**.**..
...***....*...
.*..*.*...*...
*....*....*..*
*....*....*..*
.*..*.*...*...
...***....*...
.**..*.**.**..
.***.......*..

`
 ,'twinhat, twin peaks':
 `
..*...*..
.*.*.*.*.
.*.*.*.*.
**.*.*.**
....*....

`
 ,'two eaters':
 `
**.......
.*.......
.*.*.....
..**.....
.....**..
.....*.*.
.......*.
.......**


`
 ,'unix':
 `
.**.....
.**.....
........
.*......
*.*.....
*..*..**
....*.**
..**....

`
 ,'very long barge, long long barge':
 `
.*....
*.*...
.*.*..
..*.*.
...*.*
....*.

`
 ,'very long boat, long long boat':
 `
.*...
*.*..
.*.*.
..*.*
...**

`
 ,'very long ship, long long ship':
 `
**...
*.*..
.*.*.
..*.*
...**

`

}
let cellularCollection = {};
// This will be printed directly to the Max console
Max.post(`Loaded the ${path.basename(__filename)} script`);

// Use the 'addHandler' function to register a function for a particular message
Max.addHandler("parseAndResize", (newX, newY) => {
 
	const result = parseAndResize(patterns, newX, newY);    
    const json = JSON.stringify(result);
   
    fs.writeFile('startingStates.json', json, 'utf8', ()=>{});
    Max.outlet(result);
});

Max.addHandler("fetch", (patternKey) => {
    Max.outlet(cellularCollection[patternKey])
});
// Use the 'outlet' function to send messages out of node.script's outlet
Max.addHandler("readCellularFile", () => {
	
    fs.readFile('startingStates.json', 'utf8', (err, data) =>{
        if (err){
            Max.post(err);
        } else {
        cellularCollection = JSON.parse(data); 
        Max.post('file loaded successfully')
        
    }});

});



